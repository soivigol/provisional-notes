{"ast":null,"code":"import React from'react';import{formatDate}from'../utils/storage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function NoteViewer(_ref){let{note,onEdit,onDelete,onBack}=_ref;const handleDelete=()=>{if(window.confirm('Are you sure you want to delete this note?')){onDelete();}};const copyToClipboard=async()=>{try{// Create a temporary div to render the HTML content\nconst tempDiv=document.createElement('div');tempDiv.innerHTML=note.content;// Try to copy both HTML and plain text for maximum compatibility\nconst plainText=tempDiv.textContent||tempDiv.innerText||'';if(navigator.clipboard&&window.ClipboardItem){// Modern approach: copy both HTML and plain text\nconst htmlBlob=new Blob([note.content],{type:'text/html'});const textBlob=new Blob([plainText],{type:'text/plain'});const clipboardItem=new ClipboardItem({'text/html':htmlBlob,'text/plain':textBlob});await navigator.clipboard.write([clipboardItem]);alert('Note copied with formatting! Ready to paste in WhatsApp, Telegram, or email.');}else{// Fallback: copy plain text only\nawait navigator.clipboard.writeText(plainText);alert('Note copied as plain text to clipboard!');}}catch(error){console.error('Failed to copy:',error);// Final fallback: copy plain text\ntry{const tempDiv=document.createElement('div');tempDiv.innerHTML=note.content;const plainText=tempDiv.textContent||tempDiv.innerText||'';await navigator.clipboard.writeText(plainText);alert('Note copied as plain text to clipboard!');}catch(fallbackError){console.error('All copy methods failed:',fallbackError);alert('Failed to copy to clipboard');}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"note-viewer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"viewer-title\",children:note.title||'Untitled Note'}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-date\",children:[\"Created: \",formatDate(note.createdAt),note.updatedAt!==note.createdAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \\u2022 Updated: \",formatDate(note.updatedAt)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",onClick:onBack,children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",onClick:copyToClipboard,children:\"\\uD83D\\uDCCB Copy\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-small\",onClick:onEdit,children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",onClick:handleDelete,children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"viewer-content\",dangerouslySetInnerHTML:{__html:note.content||'<p style=\"color: #666;\">No content</p>'}})]});}export default NoteViewer;","map":{"version":3,"names":["React","formatDate","jsx","_jsx","jsxs","_jsxs","NoteViewer","_ref","note","onEdit","onDelete","onBack","handleDelete","window","confirm","copyToClipboard","tempDiv","document","createElement","innerHTML","content","plainText","textContent","innerText","navigator","clipboard","ClipboardItem","htmlBlob","Blob","type","textBlob","clipboardItem","write","alert","writeText","error","console","fallbackError","className","children","title","createdAt","updatedAt","onClick","dangerouslySetInnerHTML","__html"],"sources":["/Users/david/provisional-notes/src/components/NoteViewer.js"],"sourcesContent":["import React from 'react';\nimport { formatDate } from '../utils/storage';\n\nfunction NoteViewer({ note, onEdit, onDelete, onBack }) {\n  const handleDelete = () => {\n    if (window.confirm('Are you sure you want to delete this note?')) {\n      onDelete();\n    }\n  };\n\n  const copyToClipboard = async () => {\n    try {\n      // Create a temporary div to render the HTML content\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = note.content;\n      \n      // Try to copy both HTML and plain text for maximum compatibility\n      const plainText = tempDiv.textContent || tempDiv.innerText || '';\n      \n      if (navigator.clipboard && window.ClipboardItem) {\n        // Modern approach: copy both HTML and plain text\n        const htmlBlob = new Blob([note.content], { type: 'text/html' });\n        const textBlob = new Blob([plainText], { type: 'text/plain' });\n        \n        const clipboardItem = new ClipboardItem({\n          'text/html': htmlBlob,\n          'text/plain': textBlob\n        });\n        \n        await navigator.clipboard.write([clipboardItem]);\n        alert('Note copied with formatting! Ready to paste in WhatsApp, Telegram, or email.');\n      } else {\n        // Fallback: copy plain text only\n        await navigator.clipboard.writeText(plainText);\n        alert('Note copied as plain text to clipboard!');\n      }\n    } catch (error) {\n      console.error('Failed to copy:', error);\n      // Final fallback: copy plain text\n      try {\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = note.content;\n        const plainText = tempDiv.textContent || tempDiv.innerText || '';\n        await navigator.clipboard.writeText(plainText);\n        alert('Note copied as plain text to clipboard!');\n      } catch (fallbackError) {\n        console.error('All copy methods failed:', fallbackError);\n        alert('Failed to copy to clipboard');\n      }\n    }\n  };\n\n  return (\n    <div className=\"note-viewer\">\n      <div className=\"viewer-header\">\n        <div>\n          <h1 className=\"viewer-title\">\n            {note.title || 'Untitled Note'}\n          </h1>\n          <div className=\"viewer-date\">\n            Created: {formatDate(note.createdAt)}\n            {note.updatedAt !== note.createdAt && (\n              <span> ‚Ä¢ Updated: {formatDate(note.updatedAt)}</span>\n            )}\n          </div>\n        </div>\n        <div className=\"viewer-actions\">\n          <button className=\"btn btn-secondary btn-small\" onClick={onBack}>\n            ‚Üê Back\n          </button>\n          <button className=\"btn btn-secondary btn-small\" onClick={copyToClipboard}>\n            üìã Copy\n          </button>\n          <button className=\"btn btn-small\" onClick={onEdit}>\n            ‚úèÔ∏è Edit\n          </button>\n          <button className=\"btn btn-secondary btn-small\" onClick={handleDelete}>\n            üóëÔ∏è Delete\n          </button>\n        </div>\n      </div>\n\n      <div \n        className=\"viewer-content\"\n        dangerouslySetInnerHTML={{\n          __html: note.content || '<p style=\"color: #666;\">No content</p>'\n        }}\n      />\n    </div>\n  );\n}\n\nexport default NoteViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}