{"ast":null,"code":"import React from'react';import{formatDate}from'../utils/storage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function NoteViewer(_ref){let{note,onEdit,onDelete,onBack}=_ref;const handleDelete=()=>{if(window.confirm('Are you sure you want to delete this note?')){onDelete();}};const copyToClipboard=async()=>{try{// Create a temporary element for copying\nconst tempDiv=document.createElement('div');tempDiv.innerHTML=note.content;tempDiv.style.position='fixed';tempDiv.style.left='-9999px';tempDiv.style.top='0';tempDiv.style.whiteSpace='pre-wrap';tempDiv.contentEditable=true;document.body.appendChild(tempDiv);// Focus and select all content\ntempDiv.focus();const range=document.createRange();range.selectNodeContents(tempDiv);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);// Use execCommand for better formatting preservation\nlet success=false;try{success=document.execCommand('copy');}catch(execError){console.log('execCommand failed:',execError);}// Clean up selection\nselection.removeAllRanges();document.body.removeChild(tempDiv);if(success){alert('‚úÖ Note copied with formatting! Ready to paste in WhatsApp, Telegram, or email.');}else{// Fallback to modern API\nif(navigator.clipboard){try{// Try rich text first\nconst clipData=new DataTransfer();clipData.items.add(note.content,'text/html');clipData.items.add(tempDiv.textContent||'','text/plain');await navigator.clipboard.write([new ClipboardItem({'text/html':new Blob([note.content],{type:'text/html'}),'text/plain':new Blob([tempDiv.textContent||''],{type:'text/plain'})})]);alert('‚úÖ Note copied with formatting! Ready to paste.');}catch(apiError){// Final fallback: plain text\nawait navigator.clipboard.writeText(tempDiv.textContent||'');alert('üìã Note copied as plain text to clipboard!');}}else{throw new Error('No clipboard API available');}}}catch(error){console.error('Copy failed:',error);alert('‚ùå Failed to copy. Please select the text manually and copy with Ctrl+C.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"note-viewer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"viewer-title\",children:note.title||'Untitled Note'}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-date\",children:[\"Created: \",formatDate(note.createdAt),note.updatedAt!==note.createdAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \\u2022 Updated: \",formatDate(note.updatedAt)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",onClick:onBack,children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",onClick:copyToClipboard,children:\"\\uD83D\\uDCCB Copy\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-small\",onClick:onEdit,children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",onClick:handleDelete,children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"viewer-content\",dangerouslySetInnerHTML:{__html:note.content||'<p style=\"color: #666;\">No content</p>'}})]});}export default NoteViewer;","map":{"version":3,"names":["React","formatDate","jsx","_jsx","jsxs","_jsxs","NoteViewer","_ref","note","onEdit","onDelete","onBack","handleDelete","window","confirm","copyToClipboard","tempDiv","document","createElement","innerHTML","content","style","position","left","top","whiteSpace","contentEditable","body","appendChild","focus","range","createRange","selectNodeContents","selection","getSelection","removeAllRanges","addRange","success","execCommand","execError","console","log","removeChild","alert","navigator","clipboard","clipData","DataTransfer","items","add","textContent","write","ClipboardItem","Blob","type","apiError","writeText","Error","error","className","children","title","createdAt","updatedAt","onClick","dangerouslySetInnerHTML","__html"],"sources":["/Users/david/provisional-notes/src/components/NoteViewer.js"],"sourcesContent":["import React from 'react';\nimport { formatDate } from '../utils/storage';\n\nfunction NoteViewer({ note, onEdit, onDelete, onBack }) {\n  const handleDelete = () => {\n    if (window.confirm('Are you sure you want to delete this note?')) {\n      onDelete();\n    }\n  };\n\n  const copyToClipboard = async () => {\n    try {\n      // Create a temporary element for copying\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = note.content;\n      tempDiv.style.position = 'fixed';\n      tempDiv.style.left = '-9999px';\n      tempDiv.style.top = '0';\n      tempDiv.style.whiteSpace = 'pre-wrap';\n      tempDiv.contentEditable = true;\n      document.body.appendChild(tempDiv);\n\n      // Focus and select all content\n      tempDiv.focus();\n      const range = document.createRange();\n      range.selectNodeContents(tempDiv);\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(range);\n\n      // Use execCommand for better formatting preservation\n      let success = false;\n      try {\n        success = document.execCommand('copy');\n      } catch (execError) {\n        console.log('execCommand failed:', execError);\n      }\n\n      // Clean up selection\n      selection.removeAllRanges();\n      document.body.removeChild(tempDiv);\n\n      if (success) {\n        alert('‚úÖ Note copied with formatting! Ready to paste in WhatsApp, Telegram, or email.');\n      } else {\n        // Fallback to modern API\n        if (navigator.clipboard) {\n          try {\n            // Try rich text first\n            const clipData = new DataTransfer();\n            clipData.items.add(note.content, 'text/html');\n            clipData.items.add(tempDiv.textContent || '', 'text/plain');\n            \n            await navigator.clipboard.write([\n              new ClipboardItem({\n                'text/html': new Blob([note.content], { type: 'text/html' }),\n                'text/plain': new Blob([tempDiv.textContent || ''], { type: 'text/plain' })\n              })\n            ]);\n            alert('‚úÖ Note copied with formatting! Ready to paste.');\n          } catch (apiError) {\n            // Final fallback: plain text\n            await navigator.clipboard.writeText(tempDiv.textContent || '');\n            alert('üìã Note copied as plain text to clipboard!');\n          }\n        } else {\n          throw new Error('No clipboard API available');\n        }\n      }\n\n    } catch (error) {\n      console.error('Copy failed:', error);\n      alert('‚ùå Failed to copy. Please select the text manually and copy with Ctrl+C.');\n    }\n  };\n\n  return (\n    <div className=\"note-viewer\">\n      <div className=\"viewer-header\">\n        <div>\n          <h1 className=\"viewer-title\">\n            {note.title || 'Untitled Note'}\n          </h1>\n          <div className=\"viewer-date\">\n            Created: {formatDate(note.createdAt)}\n            {note.updatedAt !== note.createdAt && (\n              <span> ‚Ä¢ Updated: {formatDate(note.updatedAt)}</span>\n            )}\n          </div>\n        </div>\n        <div className=\"viewer-actions\">\n          <button className=\"btn btn-secondary btn-small\" onClick={onBack}>\n            ‚Üê Back\n          </button>\n          <button className=\"btn btn-secondary btn-small\" onClick={copyToClipboard}>\n            üìã Copy\n          </button>\n          <button className=\"btn btn-small\" onClick={onEdit}>\n            ‚úèÔ∏è Edit\n          </button>\n          <button className=\"btn btn-secondary btn-small\" onClick={handleDelete}>\n            üóëÔ∏è Delete\n          </button>\n        </div>\n      </div>\n\n      <div \n        className=\"viewer-content\"\n        dangerouslySetInnerHTML={{\n          __html: note.content || '<p style=\"color: #666;\">No content</p>'\n        }}\n      />\n    </div>\n  );\n}\n\nexport default NoteViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}